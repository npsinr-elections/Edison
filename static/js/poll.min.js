function InterfaceCandidate(e,t,n,o,d){"use strict";var a,l,i,c,s,r,u=e,p=t,h=n,m=p.name,f=p.image||"/savedimages/default.gif",C=o,g=d;this.getCandidateButton=function(){return l},this.setLeaderState=function(e){e?(i.style.color=g,i.style.backgroundColor=C):(i.style.color=C,i.style.backgroundColor=g)},this.removeIfNotLeader=function(e){l.disabled=!0,e||(l.style.opacity=0,l.style.width="0em",setTimeout(function(){l.style.display="none"},500))},this.updateVotes=function(){s.removeChild(r),r=document.createTextNode(h.getVotes()),s.appendChild(r)},this.getCandidateDetails=function(){return{name:m,image:f,votes:h.getVotes()}},c=document.createElement("div"),c.className="candidateName",c.appendChild(document.createTextNode(m)),r=document.createTextNode(h.getVotes()),s=document.createElement("div"),s.className="candidateVotes",s.appendChild(r),i=document.createElement("div"),i.className="candidateText",i.style.backgroundColor=g,i.appendChild(c),i.appendChild(s),l=document.createElement("button"),l.className="candidateButton",l.style.backgroundColor=C,l.style.backgroundImage="url('"+f+"')",l.style.borderColor=C,l.appendChild(i),l.addEventListener("click",function(){h.vote(),s.removeChild(r),r=document.createTextNode(h.getVotes()),s.appendChild(r)}),a=document.getElementById(u),a.appendChild(l)}function InterfacePoll(e,t,n){"use strict";function o(e){w.addToVotes(e),w.getWhetherLeaders(!0).forEach(function(e,t){H[t].setLeaderState(e)}),P+=1,1===P&&(v.style.display="inline-block",E.style.display="inline-block",y.style.display="inline-block")}function d(){w.undo(),w.getWhetherLeaders(!0).forEach(function(e,t){H[t].setLeaderState(e),H[t].updateVotes()}),P-=1,0===P&&(v.style.display="none",E.style.display="none",y.style.display="none")}function a(){r.style.bottom=(window.innerHeight-r.offsetHeight)/2+"px",C.style.bottom=(window.innerHeight-C.offsetHeight)/2+"px"}function l(e,t){var n=new InterfaceCandidate(T,e,w.getCandidates()[t],F,S);n.getCandidateButton().addEventListener("click",function(){o(t)}),H.push(n)}function i(){w.getWhetherLeaders(!1).forEach(function(e,t){H[t].setLeaderState(e),H[t].removeIfNotLeader(e)}),1===w.getWinnerIndexes().length?f.appendChild(document.createTextNode("We have our winner!")):f.appendChild(document.createTextNode("We have our winners!")),f.style.opacity=1}var c,s,r,u,p,h,m,f,C,g,y,E,v,N,b,x=e,T=t.name.replace(/\s/g,"")+n,k=t,w=new Poll(k.candidates.length),B=k.name,L=k.message,F=k.foreColor,S=k.backColor,W=k.candidates,H=[],P=0;this.getHeadingSlide=function(){return s},this.getElectionSlide=function(){return m},this.getStartButton=function(){return h},this.getEndPollButton=function(){return E},this.getResetPollButton=function(){return y},this.getControls=function(){return g},this.getNextPollButton=function(){return N},this.getName=function(){return B},this.getForeColor=function(){return F},this.getBackColor=function(){return S},this.getWinnerDetails=function(){var e=w.getWinnerIndexes(),t=[];return e.forEach(function(e){t.push(H[e].getCandidateDetails())}),t},this.reset=function(){P=0,w.reset(),w.getWhetherLeaders(!0).forEach(function(e,t){H[t].setLeaderState(e),H[t].updateVotes()}),v.style.display="none",E.style.display="none",y.style.display="none"},this.end=function(){E.style.display="none",E.disabled=!0,v.style.display="none",y.style.display="none",i()},u=document.createElement("h1"),u.appendChild(document.createTextNode(B.concat(" Election"))),p=document.createElement("h2"),p.appendChild(document.createTextNode(L)),h=document.createElement("button"),h.appendChild(document.createTextNode("Start Election")),h.className="startButton",h.style.backgroundColor=F,h.style.color=S,h.addEventListener("click",function(){s.style.left="-100%",m.style.left="0em",this.disabled=!0}),r=document.createElement("div"),r.className="centeredContainer",r.appendChild(u),r.appendChild(p),r.appendChild(h),s=document.createElement("div"),s.className="slide",s.style.backgroundColor=S,s.style.color=F,s.appendChild(r),f=document.createElement("h2"),f.className="winnerDeclaration",C=document.createElement("div"),C.className="candidateButtonGroup",C.id=T,C.appendChild(f),y=document.createElement("button"),y.style.backgroundColor=S,y.style.color=F,y.style.display="none",y.appendChild(document.createTextNode("Reset This Election")),E=document.createElement("button"),E.className="endPollButton",E.style.backgroundColor=S,E.style.color=F,E.style.display="none",E.appendChild(document.createTextNode("End This Election")),v=document.createElement("button"),v.appendChild(document.createTextNode("Undo")),v.style.backgroundColor=S,v.style.borderColor=F,v.style.display="none",v.addEventListener("click",d),N=document.createElement("button"),N.appendChild(document.createTextNode("Next Election")),N.style.backgroundColor=S,N.style.borderColor=F,N.style.display="none",N.addEventListener("click",function(){m.style.left="-100%",this.disabled=!0}),g=document.createElement("div"),g.className="controls",g.appendChild(v),g.appendChild(N),m=document.createElement("div"),m.className="slide",m.style.backgroundColor=S,m.style.color=F,m.style.left="100%",m.appendChild(C),m.appendChild(g),c=document.getElementById(x),c.appendChild(s),c.appendChild(m),W.forEach(function(e,t){l(e,t)}),b=Math.floor(100/H.length)-1+"%",H.forEach(function(e){e.getCandidateButton().style.width=b}),a(),window.addEventListener("resize",a)}function FirstInterface(e){"use strict";function t(){p.style.color=P[I].style.backgroundColor,p.style.backgroundColor=P[I].style.color,void 0!==y&&(C.removeChild(y),C.removeChild(g),m.removeChild(f)),I>0&&I<P.length-1&&(g=H[I-1].getResetPollButton(),C.appendChild(g),y=H[I-1].getEndPollButton(),C.appendChild(y),f=document.createTextNode("- "+H[I-1].getName()+" Elections"),m.appendChild(f))}function n(){I+=1,P[I-1].style.left="-100%",P[I].style.left="0%",t()}function o(e,t,n){var o,d,a,l,i,c,s=document.createTextNode(e);n=n||function(){},a=document.createElement("p"),a.className="confirmMessage",a.appendChild(s),i=document.createElement("button"),i.appendChild(document.createTextNode("Okay")),i.addEventListener("click",function(){u.removeChild(o),t()}),c=document.createElement("button"),c.appendChild(document.createTextNode("Cancel")),c.addEventListener("click",function(){u.removeChild(o),n()}),l=document.createElement("div"),l.className="confirmControls",l.appendChild(i),l.appendChild(c),d=document.createElement("div"),d.className="confirmMessageBox",d.appendChild(a),d.appendChild(l),o=document.createElement("div"),o.className="confirmContainer",o.appendChild(d),u.appendChild(o),d.style.top=(window.innerHeight-d.offsetHeight)/2+"px",d.style.left=(window.innerWidth-d.offsetWidth)/2+"px",window.addEventListener("resize",function(){d.style.top=(window.innerHeight-d.offsetHeight)/2+"px",d.style.left=(window.innerWidth-d.offsetWidth)/2+"px"})}function d(e,t){var d=new InterfacePoll(W,e,t);P.push(d.getHeadingSlide()),d.getNextPollButton().addEventListener("click",n),d.getEndPollButton().addEventListener("click",function(){this.disabled=!0,o("This will end this election and no further votes will be registered. This cannot be undone. Continue?",function(){d.end(),I!==P.length-2?d.getNextPollButton().style.display="inline-block":d.getControls().appendChild(T)},function(){d.getEndPollButton().disabled=!1})}),d.getResetPollButton().addEventListener("click",function(){this.disabled=!0,o("This will reset all progress in the election for this office. This action cannot be undone. Continue?",function(){d.reset(),d.getResetPollButton().disabled=!1},function(){d.getResetPollButton().disabled=!1})}),H.push(d)}function a(){P.forEach(function(e,t){t>0?e.style.left="100%":e.style.left="0%"})}function l(){v.style.bottom=(window.innerHeight-v.offsetHeight)/2+"px",w.style.bottom=(window.innerHeight-w.offsetHeight)/2+"px"}function i(){P.unshift(E),P.push(k),E.style.backgroundImage="url('"+r.image+"')",k.style.backgroundImage="url('"+r.image+"')",N.appendChild(document.createTextNode("Welcome to the "+r.name+" elections")),b.appendChild(document.createTextNode(r.message)),l(),a(),t()}function c(){H.forEach(function(e){var t,n=[];t=document.createElement("td"),t.style.backgroundColor=e.getBackColor(),t.style.color=e.getForeColor(),t.appendChild(document.createTextNode(e.getName())),t.rowSpan=e.getWinnerDetails().length,e.getWinnerDetails().forEach(function(e){var t=document.createElement("tr"),o=document.createElement("img"),d=document.createElement("td"),a=document.createElement("td");o.src=e.image||"/static/images/default.gif",d.className="imageAndNameTd",d.appendChild(o),d.appendChild(document.createTextNode(e.name)),a.appendChild(document.createTextNode(e.votes)),t.appendChild(d),t.appendChild(a),n.push(t)}),n[0].insertBefore(t,n[0].firstElementChild),n.forEach(function(e){w.appendChild(e)})})}var s,r,u,p,h,m,f,C,g,y,E,v,N,b,x,T,k,w,B,L,F,S,W=e,H=[],P=[],I=0;h=document.createElement("h3"),h.className="navBarHeading",h.appendChild(document.createTextNode("Edison")),f=document.createTextNode(""),m=document.createElement("h3"),m.className="pollNameHeading",m.appendChild(f),C=document.createElement("div"),C.id="navBarButtonGroup",p=document.createElement("div"),p.id="nav",p.appendChild(h),p.appendChild(m),p.appendChild(C),x=document.createElement("button"),x.className="startButton",x.style.color="#000000",x.style.backgroundColor="#FFFFFF",x.appendChild(document.createTextNode("Start Elections")),x.addEventListener("click",function(){n(),this.disabled=!0}),N=document.createElement("h1"),b=document.createElement("h2"),v=document.createElement("div"),v.className="centeredContainer",v.appendChild(N),v.appendChild(b),v.appendChild(x),E=document.createElement("div"),E.className="slide",E.id="introSlide",E.style.backgroundColor="#000000",E.style.color="#FFFFFF",E.appendChild(v),T=document.createElement("button"),T.id="resultsButton",T.appendChild(document.createTextNode("See all results")),T.addEventListener("click",function(){c(),n(),H[H.length-1].getElectionSlide().style.left="-100%"}),L=document.createElement("td"),L.appendChild(document.createTextNode("Office")),F=document.createElement("td"),F.appendChild(document.createTextNode("Candidate")),S=document.createElement("td"),S.appendChild(document.createTextNode("Votes")),B=document.createElement("tr"),B.id="headerRow",B.appendChild(L),B.appendChild(F),B.appendChild(S),w=document.createElement("table"),w.id="resultsTable",w.appendChild(B),k=document.createElement("div"),k.className="slide",k.id="resultsSlide",k.style.backgroundColor="#000000",k.style.color="#FFFFFF",k.appendChild(w),u=document.getElementById(W),u.appendChild(p),u.appendChild(E),u.appendChild(k),s=new XMLHttpRequest,s.onreadystatechange=function(){4===s.readyState&&200===s.status&&(r=JSON.parse(s.responseText),r.polls.forEach(function(e,t){d(e,t)}),i())},s.open("GET","/getcandidates",!0),s.send()}function Candidate(){"use strict";var e=0;this.vote=function(){e+=1},this.unvote=function(){e-=1},this.getVotes=function(){return e},this.reset=function(){e=0}}function Poll(e){"use strict";var t,n=[],o=[];for(t=0;e>t;t+=1)n.push(new Candidate);this.getCandidates=function(){return n},this.addToVotes=function(e){o.push(n[e])},this.undo=function(){var e=o.pop();e.unvote()},this.getWhetherLeaders=function(e){var t=[],o=[],d=0,a=0;return n.forEach(function(e){o.push(e.getVotes())}),d=Math.max.apply(null,o),n.forEach(function(e){e.getVotes()===d?(t.push(!0),a+=1):t.push(!1)}),e&&a===n.length&&(t=[],n.forEach(function(){t.push(!1)})),t},this.getWinnerIndexes=function(){var e=[],t=[],o=0;return n.forEach(function(t){e.push(t.getVotes())}),o=Math.max.apply(null,e),n.forEach(function(e,n){e.getVotes()===o&&t.push(n)}),t},this.reset=function(){o=[],n.forEach(function(e){e.reset()})}}