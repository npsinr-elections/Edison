<!DOCTYPE html>
<html>
	<head><title>SLIDE TEST</title>
	<link href="/static/css/slide.css" rel="stylesheet">
	<link href='https://fonts.googleapis.com/css?family=Oswald' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
	</head>
	<body>
		<div id = "school_logo">
			<img id = "logo_pic" src="/static/images/logo_sml.png" />
			<h1>National Public School Indiranagar</h1>
		</div>
		<div id = "left"><i class="fa fa-chevron-left" id="left_button" aria-hidden="true"></i></div>
		<div id = "left_hover"></div>
		<div id = "viewport"></div>
		<div id = "right"><i class="fa fa-chevron-right" id="right_button" aria-hidden="true"></i></div>
		<div id = "right_hover"></div>
		<script src="/static/js/slides.js"></script>
		<script src="/static/js/poll.js"></script>
		<script>
			
			$( document ).ready(function() {
			$("#left_hover").mouseover(function() {
				$("#left").animate({left:0},200)
			})
			
			$("#left").hover(function() {
			},function() {
				$("#left").animate({left:"-200px"},200)
			})
			
			$("#right_hover").mouseover(function() {
				$("#right").animate({right:0},200)
			})
			
			$("#right").hover(function() {
			},function() {
				$("#right").animate({right:"-200px"},200)
			})
			
			// ------------------------------------------------------------------------------------------------------------------
			// POLL CREATION
			var data,polls,poll_count;
			polls = [];
			xhr = new XMLHttpRequest();
var url = "/getcandidates";
xhr.onreadystatechange = function() {
  if (xhr.readyState == 4 && xhr.status == 200) {
    data = JSON.parse(xhr.responseText);
    createPolls();
  }
};
xhr.open("GET", url, true);
xhr.send();

			function createPolls() {
			poll_count = 0;
		data.values.forEach(function (pollValue, index) {
				polls.push(new Poll(index,pollValue.name,pollValue.foreColor,pollValue.backColor,pollValue.message));
				for (candidate in pollValue.candidates) {
					polls[index].addCandidate(pollValue.candidates[candidate]);
				}
			});
			createPresentation();
};
			// ------------------------------------------------------------------------------------------------------------------
			function createPresentation() {
				var elections = new Presentation();
				for (poll in polls) {
					elections.newSlide("title",{"heading":polls[poll].office + " Elections","subheading":polls[poll].message,"b_col":polls[poll].backColor,"t_col":polls[poll].foreColor})
				}
					$("#left").click(function(){elections.previousSlide()});
			$("#right").click(function(){elections.nextSlide()});
				elections.start();
			// 	var elections = new Presentation();
			// elections.newSlide("title",{"heading":"NPS Elections","subheading":"2016-17","b_col":"#24248f","t_col":"#FFF"});
			// elections.newSlide("title",{"heading":"Prefect Elections","subheading":"'Before you are a leader, success is all about growing yourself. When you become a leader, success is all about growing others.'","b_col":"radial-gradient(ellipse at center, rgba(0,0,0,0) 0%,rgba(0,0,0,0) 39%,rgba(0,0,0,0.65) 100%)","t_col":"#000","poll":polls[0]});
			// elections.newSlide("election",{"heading":"Prefect Elections","b_col":"radial-gradient(ellipse at center, rgba(0,0,0,0) 0%,rgba(0,0,0,0) 39%,rgba(0,0,0,0.65) 100%)","t_col":"#000"});
			// elections.newSlide("title",{"heading":"Challengers Elections","subheading":"'To strive, to seek, to find, but not to yield'","b_col":"radial-gradient(ellipse at center, rgba(169,3,41,0.56) 0%,rgba(143,2,34,0.75) 44%,rgba(109,0,25,1) 100%)","t_col":"#FFF"});
			// elections.newSlide("title",{"heading":"Explorers Elections","subheading":'"Endeavour to reach beyond"',"b_col":"radial-gradient(ellipse at center, rgba(75,0,130,0.48) 0%,rgba(75,0,130,0.93) 100%)","t_col":"#FFF"});
			// elections.newSlide("title",{"heading":"Pioneers Elections","subheading":'"The spark that always glows; the light that always shows"',"b_col":"#FF7518","t_col":"#000"});
			// elections.newSlide("title",{"heading":"Voyagers Elections","subheading":'"Vigour, Valour, Victory"',"b_col":"#87CEFA","t_col":"#000"});
			// elections.start();
			}
			// -------------------------------------------------------------------------------------------------------
		
			
			});
		</script>
	</body>
</html>